
ucms_site.admin.user_autocomplete:
    path: /admin/ucms/ajax/users-autocomplete
    defaults:
        _controller: \MakinaCorpus\Ucms\Site\Controller\AutocompleteController::userAutocomplete
        _title: Sites
    requirements:
        _permission: site dashboard access

ucms_site.go_to_site:
    path: /go-to-site/{siteId}
    defaults:
        _controller: \MakinaCorpus\Ucms\Site\Controller\UtilityController::goToSite
    requirements:
        siteId: \d+
        _access: 'TRUE'

ucms_site.admin.site_list:
    path: /admin/structure/site
    defaults:
        _controller: \MakinaCorpus\Ucms\Site\Controller\AdminController::siteList
        _title: Sites
    requirements:
        _permission: site dashboard access

ucms_site.admin.site.request:
    path: /admin/structure/site/request
    defaults:
        _form: \MakinaCorpus\Ucms\Site\Form\SiteRequest
        _title: Request site
    requirements:
        _permission: site request

ucms_site.admin.site.view:
    path: /admin/structure/site/{site}
    defaults:
        _controller: \MakinaCorpus\Ucms\Site\Controller\AdminController::siteView
        _title_callback: \MakinaCorpus\Ucms\Site\Controller\AdminController::siteViewTitle
    requirements:
        site: \d+
        _is_granted: site.view
    options: {parameters: {site: {type: ucms_site}}}

ucms_site.admin.site.change_hostname:
    path: /admin/structure/site/{site}/change-hostname
    defaults:
        _form: \MakinaCorpus\Ucms\Site\Form\SiteHostnameChange
        _title_callback: \MakinaCorpus\Ucms\Site\Controller\AdminController::siteEditTitle
    requirements:
        site: \d+
        _is_granted: site.change_hostname
    options: {parameters: {site: {type: ucms_site}}}

ucms_site.admin.site.switch:
    path: /admin/structure/site/{site}/switch-state/{state}
    defaults:
        _form: \MakinaCorpus\Ucms\Site\Form\SiteSwitch
        _title_callback: \MakinaCorpus\Ucms\Site\Controller\AdminController::siteSwitchTitle
    requirements:
        site: \d+
        state: \d+
        # @todo implement an access checker
        _permission: NOPE PLEASE FIXME
    options: {parameters: {site: {type: ucms_site}}}

ucms_site.admin.site.edit:
    path: /admin/structure/site/{site}/edit
    defaults:
        _form: \MakinaCorpus\Ucms\Site\Form\SiteEdit
        _title_callback: \MakinaCorpus\Ucms\Site\Controller\AdminController::siteEditTitle
    requirements:
        site: \d+
        _is_granted: site.update
    options: {parameters: {site: {type: ucms_site}}}

ucms_site.admin.site.webmaster:
    path: /admin/structure/site/{site}/webmaster
    defaults:
        _controller: \MakinaCorpus\Ucms\Site\Controller\AdminController::webmasterList
        _title_callback: \MakinaCorpus\Ucms\Site\Controller\AdminController::siteWebmasterListTitle
    requirements:
        site: \d+
        _is_granted: site.manage_members
    options: {parameters: {site: {type: ucms_site}}}

ucms_site.admin.site.webmaster_add:
    path: /admin/structure/site/{site}/webmaster/add
    defaults:
        _form: \MakinaCorpus\Ucms\Site\Form\WebmasterAddExisting
        _title_callback: \MakinaCorpus\Ucms\Site\Controller\AdminController::siteWebmasterAddTitle
    requirements:
        site: \d+
        _is_granted: site.manage_members
    options: {parameters: {site: {type: ucms_site}}}

ucms_site.admin.site.webmaster_change:
    path: /admin/structure/site/{site}/webmaster/{user}/change
    defaults:
        _form: \MakinaCorpus\Ucms\Site\Form\WebmasterChangeRole
        _title_callback: \MakinaCorpus\Ucms\Site\Controller\AdminController::siteWebmasterChangeTitle
    requirements:
        site: \d+
        user: \d+
        _is_granted: site.manage_members
    options: {parameters: {site: {type: ucms_site}, user: {type: "entity:user"}}}

ucms_site.admin.site.webmaster_delete:
    path: /admin/structure/site/{site}/webmaster/{user}/delete
    defaults:
        _form: \MakinaCorpus\Ucms\Site\Form\WebmasterDelete
        _title_callback: \MakinaCorpus\Ucms\Site\Controller\AdminController::siteWebmasterDeleteTitle
    requirements:
        site: \d+
        user: \d+
        _is_granted: site.manage_members
    options: {parameters: {site: {type: ucms_site}, user: {type: "entity:user"}}}
